{$wrapper_prefix|default}

<script src="{$_STATIC_URL}/admin/js/app.permission.edit.js" type="text/javascript"></script>

<section class="hbox stretch">
    <aside class="aside-md bg-white b-r">
        <section class="vbox">
            <header class="b-b header">
                <p class="h4">{if $app_permission}编辑动作{else}添加动作{/if}</p>
            </header>
            
            <section class="scrollable wrapper w-f">
                <form class="form-horizontal" id="edit_form" action="/admin/appPermission/add" method="post">
                    <div class="form-group">
		                <label class="col-sm-2 control-label"><font class="red">*</font>所属模块</label>
		                <div class="col-sm-4">
		                    <select class="form-control" name="ap_appkey">
		                        <option value="">请选择所属模块</option>
		                        {if $apps}
		                        {foreach from=$apps item=v}
		                        <option value="{$v.appkey}" {if $v.appkey == $selected_appkey}selected{/if}>{$v.name}</option>
		                        {/foreach}
		                        {/if}
		                    </select>
		                </div>
		            </div>
                    <div class="line line-dashed line-lg pull-in"></div>
                    
                    <div class="form-group">
		                <label for="ap_module" class="col-sm-2 control-label"><font class="red">*</font>子模块名</label>
		                <div class="col-sm-4">
		                    <input type="text" class="form-control" id="ap_module" name="ap_module" value="{$app_permission.module}" />
		                </div>
		            </div>
		            <div class="line line-dashed line-lg pull-in"></div>
		            
		            <div class="form-group">
		                <label for="ap_controller" class="col-sm-2 control-label"><font class="red">*</font>控制器</label>
		                <div class="col-sm-4">
		                    <input type="text" class="form-control" id="ap_controller" name="ap_controller" value="{$app_permission.controller}" />
		                </div>
		            </div>
		            <div class="line line-dashed line-lg pull-in"></div>
		            
		            <div class="form-group">
		                <label for="ap_action" class="col-sm-2 control-label"><font class="red">*</font>动作</label>
		                <div class="col-sm-4">
		                    <input type="text" class="form-control" id="ap_action" name="ap_action" value="{$app_permission.action}" />
		                </div>
		                <div class="col-sm-6">
                            <p class="form-control-static">可同时输入多个动作，用","隔开</p>
                        </div>
		            </div>
		            <div class="line line-dashed line-lg pull-in"></div>
		            
		            <div class="form-group">
		                <label class="col-sm-2 control-label"><font class="red">*</font>权限</label>
		                <div class="col-sm-4">
		                    <select class="form-control" name="ap_permission_id">
		                        <option value="">请选择权限</option>
		                        {if $permissions}
		                        {foreach from=$permissions item=v}
		                        <option value="{$v.permission_id}" {if $v.permission_id == $selected_permission_id}selected{/if}>{$v.permission_name}</option>
		                        {/foreach}
		                        {/if}
		                    </select>
		                </div>
		            </div>
                    
                    <input type="hidden" name="keys" id="keys" value="{if $app_permission}{$app_permission.appkey},{$app_permission.module},{$app_permission.controller},{$app_permission.action}{/if}" />
                </form>
            </section>
            
            <footer class="footer b-t bg-white-only">
                <div class="m-t-sm">
                    <button type="button" id="submit_save_back" class="btn btn-s-md btn-primary btn-sm input-submit">保存</button>
                    {if ! $app_permission}<button type="button" id="submit_save_continue" class="btn btn-s-md btn-primary btn-sm input-submit">保存并继续添加</button>{/if}
                    <button type="button" id="submit_cancel" class="btn btn-danger btn-sm input-submit">取消</button>
                    <span id="edit_notice"></span>
                </div>
            </footer>
        </section>
    </aside>
</section>

{$wrapper_suffix|default}